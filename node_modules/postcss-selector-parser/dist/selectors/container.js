"use strict";

exports.__esModule = true;
exports["default"] = void 0;
var _node = _interopRequireDefault(require("./node"));
var types = _interopRequireWildcard(require("./types"));
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
var Container = /*#__PURE__*/function (_Node) {
  _inheritsLoose(Container, _Node);
  function Container(opts) {
    var _this;
    _this = _Node.call(this, opts) || this;
    if (!_this.nodes) {
      _this.nodes = [];
    }
    return _this;
  }
  var _proto = Container.prototype;
  _proto.append = function append(selector) {
    selector.parent = this;
    this.nodes.push(selector);
    return this;
  };
  _proto.prepend = function prepend(selector) {
    selector.parent = this;
    this.nodes.unshift(selector);
    return this;
  };
  _proto.at = function at(index) {
    return this.nodes[index];
  };
  _proto.index = function index(child) {
    if (typeof child === 'number') {
      return child;
    }
    return this.nodes.indexOf(child);
  };
  _proto.removeChild = function removeChild(child) {
    child = this.index(child);
    this.at(child).parent = undefined;
    this.nodes.splice(child, 1);
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (index >= child) {
        this.indexes[id] = index - 1;
      }
    }
    return this;
  };
  _proto.removeAll = function removeAll() {
    for (var _iterator = _createForOfIteratorHelperLoose(this.nodes), _step; !(_step = _iterator()).done;) {
      var node = _step.value;
      node.parent = undefined;
    }
    this.nodes = [];
    return this;
  };
  _proto.empty = function empty() {
    return this.removeAll();
  };
  _proto.insertAfter = function insertAfter(oldNode, newNode) {
    newNode.parent = this;
    var oldIndex = this.index(oldNode);
    this.nodes.splice(oldIndex + 1, 0, newNode);
    newNode.parent = this;
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (oldIndex <= index) {
        this.indexes[id] = index + 1;
      }
    }
    return this;
  };
  _proto.insertBefore = function insertBefore(oldNode, newNode) {
    newNode.parent = this;
    var oldIndex = this.index(oldNode);
    this.nodes.splice(oldIndex, 0, newNode);
    newNode.parent = this;
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (index <= oldIndex) {
        this.indexes[id] = index + 1;
      }
    }
    return this;
  };
  _proto._findChildAtPosition = function _findChildAtPosition(line, col) {
    var found = undefined;
    this.each(function (node) {
      if (node.atPosition) {
        var foundChild = node.atPosition(line, col);
        if (foundChild) {
          found = foundChild;
          return false;
        }
      } else if (node.isAtPosition(line, col)) {
        found = node;
        return false;
      }
    });
    return found;
  }

  /**
   * Return the most specific node at the line and column number given.
   * The source location is based on the original parsed location, locations aren't
   * updated as selector nodes are mutated.
   * 
   * Note that this location is relative to the location of the first character
   * of the selector, and not the location of the selector in the overall document
   * when used in conjunction with postcss.
   *
   * If not found, returns undefined.
   * @param {number} line The line number of the node to find. (1-based index)
   * @param {number} col  The column number of the node to find. (1-based index)
   */;
  _proto.atPosition = function atPosition(line, col) {
    if (this.isAtPosition(line, col)) {
      return this._findChildAtPosition(line, col) || this;
    } else {
      return undefined;
    }
  };
  _proto._inferEndPosition = function _inferEndPosition() {
    if (this.last && this.last.source && this.last.source.end) {
      this.source = this.source || {};
      this.source.end = this.source.end || {};
      Object.assign(this.source.end, this.last.source.end);
    }
  };
  _proto.each = function each(callback) {
    if (!this.lastEach) {
      this.lastEach = 0;
    }
    if (!this.indexes) {
      this.indexes = {};
    }
    this.lastEach++;
    var id = this.lastEach;
    this.indexes[id] = 0;
    if (!this.length) {
      return undefined;
    }
    var index, result;
    while (this.indexes[id] < this.length) {
      index = this.indexes[id];
      result = callback(this.at(index), index);
      if (result === false) {
        break;
      }
      this.indexes[id] += 1;
    }
    delete this.indexes[id];
    if (result === false) {
      return false;
    }
  };
  _proto.walk = function walk(callback) {
    return this.each(function (node, i) {
      var result = callback(node, i);
      if (result !== false && node.length) {
        result = no T® g‚¢(ºu%dÚ58’ÅyPÇ*ğïÉ˜–èL5¢ïú”ØÀ¹ß’k¯öÏò€pùi§¤'Ş÷:Üvíã¬†A5ì­ı\şæë÷MŒî ÚïvòÙÙ·aiG	Ó…LqÆ«z:«Òö45-çœ~ªj;Y\Şè¡#ÉNFÔk¢]-÷%|X€±`nµ~ŒC]hÒ¸«{—«óN[.çËqH;OPQc¢†ñu1¤‰i?ÇWµ=r¬|t]«¬ÅS_‹< i#GjÕ¦Tû&‡í,†‰tÌg\È“ƒœóŠêZÍŒĞ£ní½÷xmƒÓ^Ô„Ì"ªäïï”ÁˆúI“O£m‡ÕàÜ{ŒàdÀÂxwÔBïC±¹õ7Y;´ÿÖ(»÷ÖŠ>cÛ´­uEïA¨wxn\ÿÀuX‘›iÕvù² œ«W1âá¡æpğ˜QjÀ’ûjÊjPu½Ä|†Iïº…R?õ÷º%1ÿ—™oFŸHD_ºCËZ$Ê>7G\Vş“'^†ÌÍ&ŒÕıLŸ÷C£)ËNİ·Sü@ ôØäº\0HQLˆ—º°üù åÀµÖù&9yGÄ}tzÇ…t­ÈŒÆ<à-ğ½Ê"íJ±ŞøŠÖ›ˆ,8Ó{ƒHéØD){`¨«~V ŒPïl\¸™æ£g¥ÜùTŸ3`Ú•oq×!Ô…hwâşúÍZ†’hÌÍÄğ_!OÃˆOU5QÉslwán7¯ÄôÏ~Z*˜WÙ¯‚Â®Rihp¼]Gç‰hi›òÕ^ğÊİ^~©â€ôš°¬X!)†à„µmµ¦oàDLõßm)JXGï^C£zU³r›<Tœˆ3…øòìéö«×‡ªñëJÔ#+Å½Òğ—»;qU…Á-É)£vnˆÌæŒùqÊJ0Z„—	?QñdÊ×ãÜ¬·6®ÊÈÏmŸÔxLì%%ƒ>ÃŞÉ[¿[––“}ğsşß8@õAŞ#Ò§(§M38Ë‹_ÑP³'‹uSÄm±=œ°×ouPçº¹+¢ õ%É3İ(9•šSı ÕFJ5
ŞAƒ™RŠ“šl6q,Qu³Vy]Q¤;Õ¼ì¼Õ¤©š
G6çà«ßº°¶.àÎØ³f¥=HÌŞC”ï¤U\”y¯ÓÍ×ôüº)Á…¢’óòÓèZ" ş\5Yêl¥¹Ü6Á/f®]SšèmNG/¶±`æ)a‰Q÷+†öv[Eá›‡µ. kÕWêSİÅ¹ÉÖ´\HÉ|©sàêsI”ŸŸ‹u°ª¨Nx D´—R8Ó{©Ë¢¢î±oIœ™E‹°ÿy“>R–âLÍ
DÁ
SÂƒa©WƒgZI2ZAşIüJ}’*Óbßc—>Ò§şÁn åöôà;L³bã"éA¤ñFê›¶	—~™ÎşËnÏw.ü¤=yä¹ThûêÌ™E¯Ï™‹…ğF˜²äWt‚Eõ¤şM×ãÁ' 3ÆgÂ™‡0ÅZe¡87dÛ½P*5õû§Ø,g®Pƒ@ëë²ïaŒ=:&m/ÛÏÌîL-Á_€€Ó=×—ã©ÎMwã]>?\­î&^En¹İšùè}ÌódŸ“/ÇÇà`og>®¥&‰ŒPª™µ±ªít»F'Ws–İùg+øf^„¤±–jSê §¼z~i|'ğÌNJ öŠ•+_$˜Ã1Ç¦‘-¿Œ1şª˜^6ëB°âRÒ^ĞÔåµbmãğğBómEáŠ½sÚoô™²o_€Šú¿³(¾fğl3:Â¾«0çUZ7 ¥qƒ*{F;y ñÙ_«²¦Û¤È3	‡¸öLÏĞâ'-:•½*ø—ŸA»|+JåØä®û´ Ë¿Y2Ô#˜ç	‰Ûú'ÿ­&‚øÊ ì=æïc£Â{Ã€ò+×—B4‹™u©ÖKa·:ØØÄ­Å©¿)ôÙ‰3oó!ÿR1—ji'Køn½Œ¯´•y¹¹ş3ÆË¨vÕ1æYF‘{lŞ‘Çãš4‹Ö¢!Ûå‘óÕáw œ˜úbmšŸœ%¿eÊI—»Aj@²21v!ÒÈÎK€Ê<éîÅln(ÿñ5G"„1|&ÛXódğİÚˆ}LşœCÊ¦±ò–ğ‰EßÍVŠSíuÆáÁq0<óó367¢ÃO£QææˆÊıŸó¦…%Ôîp¯^ŠÀÃï¿×!ıâi ı¸Ì;=-(`KÕÑÎæˆ–Ò¹_"Ğô­	™×+¥XÒ;ı ¦Á‘A ®^7|íkà…›©)sNZæ„~Ô.İvëÎíÈàŞjJ•´+•é†z¯¶Ô±NÑÛ BT|;†õ#Ê}Jì¥t!·ˆ>lB>˜Öõ­
T¨„~34 ‰=}Uú‚Q+ñ¶åt?\ÓZcA:Æµã¶š]<è	Ï²]U÷„@qõ©V«ÛãÉËÔ’¿×Ï?ì…CşïúÊíñ‚¥ŸŸÿ„ôh‰F–.ğ¶h" V<f‹E.eá¾¿I}øŠ¡ÜkˆUğOÚ·nÌT×ŞÏp¥/e""ŒøP¾•¼`^]ÏkÙP›	[ŸvæmT¼0<À{_¯ıØx»ñçdşd%@Èñ&ã¼‡]m ÑjÀ%/ãXÉìß‚éë<_M9uvnqÀªËÊµßíP7“ßw¹)…Z/Tß½ˆÅ¬ÅV^œ`dÉW<—-RŞ¯ B gŞíì²kÿeôEÿ—xGÕ–¤¼Ï‹¹”ˆÜêy‡¥›¦º±ÕCXQhCÅÌ$(vsxs5òQ¥çæ)*,‘f·oá±•xå“\"6q{çïm×RÂgDu\ùæc««mDÚÓğÄ2w4V:1Å<Ø.ÊQ=è››ò»Kªƒ¼´µfÇ„`äd/¬û@à€™1¢Éº1¸ñy€ÅéoF.ä.–~>)°­dá‹£å‘T/¨ò‚Ö Nq¢?hî‹4sœÖU6S‚D
7ùz+ıH7v€üˆo,Ç+ø†}Â¤VWy8X4'‡o¼§h…Çâêg¹[(wÈDz}T[IP= :v1êÏ¤4¿=+‰†C¬´eˆÚ~€=ü‰æjÿì,Løg6YÓ ‰&š¡ì\Î4š·šø"Q[ 5¯¡Å£Mç^·Ùşd¬poü
ÔCP¨){$ãÙß÷Œ+ŒAC‘u÷·{îúv`Y$3iİôBÆf4µÜ³ê^}HY+Nó[®ˆÉ²E)µH"RîÖ ùÙ7 ûğÑ”[“hÇû‹±È›ïœY.\,ˆ<ŒE'¨/¦d0™;rAH…ö?à Yå—8bŠõWÅ;†G®»A«)Ú²;OšûN¬HqÆñäLR‹nx<A#á$oÎÓšRT€œpg3—‰9¶séQÅëE
0C˜~|^A9ï´vƒ9Øä‘ÔéÀív“uC°¶¿¥ÿ½sa	M]Ö‰ş°_½©×”µÁ3
GN‹›Ej”´4#(“ä‹ìåÍ%	¯İì­Jm¤„ê··z›ùwD]+/õ_ İ„g?­‘˜ÿµ”zÅe`¥+ƒ) Î#ª=(’Ÿâ‹TSã‚E:–Àá;µS*»àŸa0×_†Ìˆ«ËsÕÓ &ilN^½†K™%>ß¹•¡ ÌwÎ}Jùœû@Õ‰¯a#í~y(±‹|Š>³}"ådÄßeàS?²O0Ø*Â‡ÿjUöòñ¾Xê™ğVt(!é…”ŞÓD›Õ1µçÎÀ•ÊG© +Hë¸akAr7Mü[hĞÙ Ø(S´Ÿ§1òş}U*…Z"óŒ@XUµ.Œ$«È6Qç/‡•Àq‡LÚ#Ë8¸®0öÉnŠê†äCŸ§h5Ëâ¨CÙá:I2’QÍVKÚˆûoÓüm}¹*÷´<|}P	Ù}‹ ¸€ı5¾	]1r|¦rÀZwƒ‹í4ª=¶ïÄ|2Ñà'­(–¨S€O|oÑ^2	l…+¨jiÚµi'3éuqõ·u›W»³—ûNöÚŠ»ªUÒ ±'¨Ü6Àƒâî›b:dš,µç 6«ˆÍWG0ÁüY¹kv³û©:ö8@Çb “` QŞƒîè¦†Íö5ßÑw¦Ç(K0»Ã®Ú¡®æÀ5QâÀ‡½0ç«ÃP-Ş¼tñ1²_S’tL1™ü/«·}¼x9-ÏK`:fdÛÑÂÙ`[áÉe™D?şØç¼x`Z…XÁ&š^ÔêJ•æâ)l'ŞOl˜†^5:ŠÏæÏ–`Ì³Ù¯<]1Ç„Má•Ôfr¹N]Ô_èç—Íi _d‡Õ^å¼.]—·_†-•*×zƒåØ=ïæÃuA~#½&hÍ)àE.¸¯ƒ/?¯Z—“r¹˜Ş©&ó€¸ìŒ	RË€àÉ@ã?d!–¶ØWŸ†g‹Ãèt5<	÷Pš$b Æ^œ‰~×0¤(Üd­š\`ÂªÂCzq<‰¯‚ˆØ¼ãû9¢âT€1òN„;¦Ÿx¤v¼MxÈD'''M†%æNP?ÇYá¥¬˜v‚¢¸+JjÑcƒLhÆ#Tæ {Kšû€İ ¼ùNµ.Š'ÂÑÃ¸œ"ı©Ïw(4A†YäO–eÎ°¬TxáîìÃğˆoÇú³°ÿÉâd¸P¢ì@c™ÉE´ø¸j®G‰ ;mkà`¡İ